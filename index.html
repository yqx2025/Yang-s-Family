<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五行八字算命 - 小六壬卜卦</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="profile-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>五行八字算命</h1>
            <p class="subtitle">传统文化，现代解读</p>
        </header>

        <nav class="navigation">
            <button class="nav-btn active" data-tab="xiaoliuren">小六壬卜卦</button>
            <button class="nav-btn" data-tab="bazi">五行八字</button>
            <button class="nav-btn" data-tab="profile">我的</button>
            <!-- <button class="nav-btn logout-btn" id="logoutBtn" style="float:right;">退出登录</button> -->
        </nav>
        

        <!-- 小六壬卜卦页面 -->
        <div id="xiaoliuren" class="tab-content active">
            <div class="divination-section">
                <h2>小六壬卜卦</h2>
                <p class="description">小六壬是古代占卜术之一，用于预测事物的吉凶变化。请专注于您想要询问的问题，然后开始卜卦。</p>
                
                <div class="question-input">
                    <label for="question">请输入您要询问的问题：</label>
                    <input type="text" id="question" placeholder="例如：今天出行是否顺利？" maxlength="100">
                </div>

                <div class="divination-controls">
                    <button id="startDivination" class="primary-btn">开始卜卦</button>
                    <button id="resetDivination" class="secondary-btn">重新卜卦</button>
                </div>

                <div id="divinationProcess" class="divination-process hidden">
                    <h3>卜卦过程</h3>
                    <div class="hexagram-display">
                        <div class="hexagram-item">
                            <span class="label">月将：</span>
                            <span id="yuejiang" class="value"></span>
                        </div>
                        <div class="hexagram-item">
                            <span class="label">时辰：</span>
                            <span id="shichen" class="value"></span>
                        </div>
                        <div class="hexagram-item">
                            <span class="label">起课：</span>
                            <span id="qike" class="value"></span>
                        </div>
                    </div>
                </div>

                <div id="divinationResult" class="divination-result hidden">
                    <h3>卜卦结果</h3>
                    <div id="divinationSymbol" class="hidden"></div>
                    <div id="aiDivination" style="margin-top:12px; text-align:left;"></div>
                </div>
            </div>
        </div>

        <!-- 五行八字页面 -->
        <div id="bazi" class="tab-content">
            <div class="bazi-section">
                <h2>五行八字</h2>
                <p class="description">根据出生年月日时，计算五行八字，分析命理特征。</p>
                
                <div class="birth-input">
                    <h3>请输入出生信息</h3>
                    <div class="input-row">
                        <div class="input-group">
                            <label for="birthYear">出生年份：</label>
                            <input type="number" id="birthYear" min="1900" max="2100" placeholder="1990">
                        </div>
                        <div class="input-group">
                            <label for="birthMonth">出生月份：</label>
                            <select id="birthMonth">
                                <option value="">选择月份</option>
                                <option value="1">一月</option>
                                <option value="2">二月</option>
                                <option value="3">三月</option>
                                <option value="4">四月</option>
                                <option value="5">五月</option>
                                <option value="6">六月</option>
                                <option value="7">七月</option>
                                <option value="8">八月</option>
                                <option value="9">九月</option>
                                <option value="10">十月</option>
                                <option value="11">十一月</option>
                                <option value="12">十二月</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="birthDay">出生日期：</label>
                            <input type="number" id="birthDay" min="1" max="31" placeholder="15">
                        </div>
                        <div class="input-group">
                            <label for="birthHour">出生时辰：</label>
                            <select id="birthHour">
                                <option value="">选择时辰</option>
                                <option value="23">子时 (23:00-01:00)</option>
                                <option value="1">丑时 (01:00-03:00)</option>
                                <option value="3">寅时 (03:00-05:00)</option>
                                <option value="5">卯时 (05:00-07:00)</option>
                                <option value="7">辰时 (07:00-09:00)</option>
                                <option value="9">巳时 (09:00-11:00)</option>
                                <option value="11">午时 (11:00-13:00)</option>
                                <option value="13">未时 (13:00-15:00)</option>
                                <option value="15">申时 (15:00-17:00)</option>
                                <option value="17">酉时 (17:00-19:00)</option>
                                <option value="19">戌时 (19:00-21:00)</option>
                                <option value="21">亥时 (21:00-23:00)</option>
                            </select>
                        </div>
                    </div>

                    <button id="calculateBazi" class="primary-btn">计算八字</button>
                </div>

                <div id="baziResult" class="bazi-result hidden">
                    <h3>八字分析结果</h3>
                    <div class="bazi-display">
                        <div class="bazi-pillars">
                            <div class="pillar">
                                <div class="pillar-title">年柱</div>
                                <div class="pillar-content">
                                    <div class="gan" id="yearGan"></div>
                                    <div class="zhi" id="yearZhi"></div>
                                </div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">月柱</div>
                                <div class="pillar-content">
                                    <div class="gan" id="monthGan"></div>
                                    <div class="zhi" id="monthZhi"></div>
                                </div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">日柱</div>
                                <div class="pillar-content">
                                    <div class="gan" id="dayGan"></div>
                                    <div class="zhi" id="dayZhi"></div>
                                </div>
                            </div>
                            <div class="pillar">
                                <div class="pillar-title">时柱</div>
                                <div class="pillar-content">
                                    <div class="gan" id="hourGan"></div>
                                    <div class="zhi" id="hourZhi"></div>
                                </div>
                            </div>
                        </div>

                        <div class="wuxing-analysis">
                            <h4>五行分析</h4>
                            <div id="wuxingChart" class="wuxing-chart"></div>
                            <div id="wuxingDescription" class="wuxing-description"></div>
                            <div id="aiBazi" style="margin-top:12px; text-align:left;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 个人档案页面 -->
        <div id="profile" class="tab-content">
            <div class="profile-section">
                <h2>我的个人档案</h2>
                
                <!-- 用户信息 -->
                <div class="user-info">
                    <div class="user-avatar">
                        <span class="material-icons">account_circle</span>
                    </div>
                    <div class="user-details">
                        <h3 id="userDisplayName">用户</h3>
                        <p id="userEmail">email@example.com</p>
                    </div>
                </div>

                <!-- 功能导航 -->
                <div class="profile-nav">
                    <button class="profile-nav-btn active" data-section="people">算命对象</button>
                    <button class="profile-nav-btn" data-section="history">历史记录</button>
                </div>

                <!-- 算命对象管理 -->
                <div id="people-section" class="profile-content-section active">
                    <div class="section-header">
                        <h3>算命对象管理</h3>
                        <button class="add-person-btn" id="addPersonBtn" onclick="try{window.profileManager && window.profileManager.showAddPersonModal();}catch(e){console.error(e)} return false;">
                            <span class="material-icons">add</span>
                            添加新对象
                        </button>
                    </div>
                    
                    <div class="people-list" id="peopleList">
                        <!-- 算命对象列表将在这里动态生成 -->
                    </div>
                </div>

                <!-- 历史记录 -->
                <div id="history-section" class="profile-content-section">
                    <div class="section-header">
                        <h3>算命历史记录</h3>
                    </div>
                    
                    <div class="history-list" id="historyList">
                        <!-- 历史记录将在这里动态生成 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 添加算命对象弹窗 -->
        <div id="addPersonModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>添加算命对象</h3>
                    <button class="close-modal" id="closeModal">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                
                <form id="addPersonForm" class="modal-form">
                    <div class="form-group">
                        <label for="personName">姓名</label>
                        <input type="text" id="personName" placeholder="请输入姓名" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="personBirthYear">出生年份</label>
                        <input type="number" id="personBirthYear" min="1900" max="2100" placeholder="1990" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="personBirthMonth">出生月份</label>
                        <select id="personBirthMonth" required>
                            <option value="">选择月份</option>
                            <option value="1">一月</option>
                            <option value="2">二月</option>
                            <option value="3">三月</option>
                            <option value="4">四月</option>
                            <option value="5">五月</option>
                            <option value="6">六月</option>
                            <option value="7">七月</option>
                            <option value="8">八月</option>
                            <option value="9">九月</option>
                            <option value="10">十月</option>
                            <option value="11">十一月</option>
                            <option value="12">十二月</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="personBirthDay">出生日期</label>
                        <input type="number" id="personBirthDay" min="1" max="31" placeholder="15" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="personBirthHour">出生时辰</label>
                        <select id="personBirthHour" required>
                            <option value="">选择时辰</option>
                            <option value="23">子时 (23:00-01:00)</option>
                            <option value="1">丑时 (01:00-03:00)</option>
                            <option value="3">寅时 (03:00-05:00)</option>
                            <option value="5">卯时 (05:00-07:00)</option>
                            <option value="7">辰时 (07:00-09:00)</option>
                            <option value="9">巳时 (09:00-11:00)</option>
                            <option value="11">午时 (11:00-13:00)</option>
                            <option value="13">未时 (13:00-15:00)</option>
                            <option value="15">申时 (15:00-17:00)</option>
                            <option value="17">酉时 (17:00-19:00)</option>
                            <option value="19">戌时 (19:00-21:00)</option>
                            <option value="21">亥时 (21:00-23:00)</option>
                        </select>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelAddPerson">取消</button>
                        <button type="submit" class="btn-primary">保存</button>
                    </div>
                </form>
            </div>
        </div>

        

        <footer class="footer">
            <p>&copy; 2024 五行八字算命 - 仅供娱乐参考</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- 主应用脚本 -->
    <script src="script.js"></script>
</body>
</html>
